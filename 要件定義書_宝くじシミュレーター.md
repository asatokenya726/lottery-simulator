# 要件定義書: 宝くじシミュレーター

| 項目 | 内容 |
|------|------|
| ドキュメントバージョン | v0.1（叩き台） |
| 作成日 | 2026-02-10 |
| ステータス | ドラフト |
| 関連ドキュメント | 企画書_宝くじシミュレーター.md |

---

## 1. 目的・背景

### 1-1. 背景（企画書 B3: 課題 より）

- 宝くじ市場は2005年ピーク（1兆円超）から2023年の8,088億円へ約30%縮小
- 主力購入層は50〜70代で、20〜30代の若年層は宝くじに触れる機会がほとんどない
- 既存の宝くじシミュレーターは「統計ツール」止まりで、ゲーム性・継続動機がない
- 宝くじの期待値（還元率約47%）を体感で理解できる場が存在しない

### 1-2. 目的

宝くじの当選確率を「10連ガチャ」のUIで体感できるWebアプリを開発する。
ゲーム内通貨と毎日の資金補給サイクルにより、継続的にプレイできるエンターテインメント体験を提供する。

### 1-3. 提供価値（企画書 B5: 提供価値 より）

| Before | After |
|--------|-------|
| 宝くじに興味はあるが買うのは面倒 | ゲーム内通貨でノーリスクに10連ガチャ感覚で体験 |
| 当選確率が体感できない | 数百〜数千回のシミュレーションで確率を体で理解 |
| ソシャゲのガチャ文化に馴染みはあるが宝くじに触れていない | ガチャUIで宝くじの確率を直感的に理解 |

---

## 2. スコープ

### 2-1. 対象ユーザー（企画書 B4: ターゲット より）

| 区分 | 属性 |
|------|------|
| 一次ターゲット | 20〜35歳男性、スマホゲーム経験者、ガチャ文化に馴染みがある層 |
| 二次ターゲット | 宝くじ購入経験者（40〜60代）で確率を検証したい層 |
| 除外 | ギャンブル依存症傾向の強い層（注意喚起UIで対応） |

### 2-2. MVP範囲（企画書 B8: MVP範囲 より）

| やる（MVP） | やらない（将来版） |
|-------------|-------------------|
| ゲーム内通貨による所持金管理 | リアルマネー課金 |
| 10連ガチャUI（宝くじ10枚購入） | ユーザー間フリマ/取引機能 |
| 宝くじ1種類の確率再現 | 複数宝くじ種類（ロト6/7、スクラッチ等） |
| 当選演出（アニメーション/エフェクト） | ガチャ景品（コレクションアイテム） |
| 毎日0時の資金補給 | ランキング/リーダーボード |
| 累計収支・当選履歴の表示 | ユーザーアカウント/ログイン機能 |
| SNSシェア機能（結果画像生成） | プッシュ通知 |
| レスポンシブデザイン（スマホ優先） | ネイティブアプリ化 |
| ギャンブル依存注意喚起の表示 | 多言語対応 |

### 2-3. 対象プラットフォーム

| 項目 | 内容 |
|------|------|
| 種別 | Webアプリ（SPA） |
| 対応デバイス | スマートフォン（優先）、PC |
| 対応ブラウザ | Chrome, Safari, Edge（最新2バージョン） |

---

## 3. 機能要件一覧

※ 各機能の詳細仕様（画面定義・項目定義・バリデーション等）は次フェーズ（機能詳細定義）で決定する。

### FR-01: ゲーム内通貨管理

| 項目 | 内容 |
|------|------|
| 概要 | ユーザーがゲーム内通貨を所持し、宝くじ購入・当選金受取で増減する |
| 主な要件 | - 初回アクセス時に初期資金を付与する |
|  | - 所持金の現在額を常時画面に表示する |
|  | - 所持金が購入額に満たない場合、購入を不可とする |
| 次フェーズで決定 | 通貨単位（円 or 独自通貨）、初期資金額、上限額 |

### FR-02: 10連ガチャ（宝くじ10枚一括購入・抽選）

| 項目 | 内容 |
|------|------|
| 概要 | 10枚分の宝くじを一括購入し、抽選結果を表示する |
| 主な要件 | - 購入ボタン押下でゲーム内通貨を消費する |
|  | - 現実の宝くじと同一の当選確率で10枚分の抽選を行う |
|  | - 各等級の当選/落選を判定する |
|  | - 当選金をゲーム内通貨に加算する |
| 次フェーズで決定 | 宝くじ種類、確率テーブル、1枚あたりの価格、1連以外の購入単位の有無 |

### FR-03: 当選演出

| 項目 | 内容 |
|------|------|
| 概要 | 抽選結果に応じた視覚演出を表示する |
| 主な要件 | - 当選等級に応じて演出を差別化する（高額当選ほど派手に） |
|  | - 10枚分の結果を順次または一括で表示する |
|  | - 演出スキップ機能を設ける |
| 次フェーズで決定 | 演出パターン詳細、アニメーション仕様、サウンド有無 |

### FR-04: 毎日0時の資金補給

| 項目 | 内容 |
|------|------|
| 概要 | 毎日0時（JST）に所持金が一定額以下の場合、資金を補給する |
| 主な要件 | - 補給はクライアント側の日時判定で実行する |
|  | - 補給済みかどうかの状態を保持する（1日1回制限） |
|  | - 所持金が一定額以上ある場合は補給しない |
| 次フェーズで決定 | 補給額、補給条件の閾値、補給演出 |

### FR-05: 累計収支・当選履歴

| 項目 | 内容 |
|------|------|
| 概要 | 過去のプレイ結果と累計の収支を閲覧できる |
| 主な要件 | - 累計購入枚数・累計購入額を表示する |
|  | - 累計当選額・回収率を表示する |
|  | - 等級別の当選回数を表示する |
|  | - 当選履歴を一覧で確認できる |
| 次フェーズで決定 | 履歴の保持件数上限、表示形式（グラフ/テーブル）、統計項目の詳細 |

### FR-06: SNSシェア機能

| 項目 | 内容 |
|------|------|
| 概要 | 抽選結果をSNS（主にX/Twitter）にシェアできる |
| 主な要件 | - 抽選結果からシェア用の画像またはテキストを生成する |
|  | - X(Twitter)へのシェアボタンを設置する |
|  | - シェア内容にサービスURLを含める |
| 次フェーズで決定 | シェア画像のデザイン、対応SNSの範囲、OGP設定 |

### FR-07: ギャンブル依存注意喚起

| 項目 | 内容 |
|------|------|
| 概要 | 本サービスがシミュレーションであることを明示し、依存症への注意喚起を行う |
| 主な要件 | - 「これはシミュレーションです」のメッセージを常時表示する |
|  | - ギャンブル依存症相談窓口へのリンクを設置する |
|  | - 初回アクセス時に注意事項を表示する |
| 次フェーズで決定 | 表示位置、文言、リンク先 |

---

## 4. 非機能要件

### NFR-01: パフォーマンス

| 項目 | 要件 |
|------|------|
| 初回ロード | 3秒以内（3G回線を除く） |
| 抽選処理 | 10連ガチャの抽選〜結果表示が演出含め5秒以内 |
| 操作レスポンス | ボタン操作後のUI応答は200ms以内 |

### NFR-02: 可用性

| 項目 | 要件 |
|------|------|
| 稼働率目標 | 99%（月間ダウンタイム約7時間以内） |
| 静的ホスティング前提 | サーバーサイド処理なし（MVP段階）のため、ホスティングサービスのSLAに準拠 |

### NFR-03: 対応環境

| 項目 | 要件 |
|------|------|
| OS | iOS 15以上、Android 10以上、Windows 10以上、macOS 12以上 |
| ブラウザ | Chrome / Safari / Edge（各最新2バージョン） |
| 画面サイズ | 375px〜1920px（モバイルファースト設計） |

### NFR-04: セキュリティ

| 項目 | 要件 |
|------|------|
| 通信 | HTTPS必須 |
| 個人情報 | MVP段階ではユーザー個人情報を収集しない |
| データ改ざん | クライアントサイド保存のため完全な防止は不可。MVP段階では許容する |

### NFR-05: 保守性

| 項目 | 要件 |
|------|------|
| 宝くじ確率テーブル | 設定ファイルまたは定数として外部化し、種類追加・確率変更を容易にする |
| コード品質 | コメントは日本語、変数名・関数名は英語で記述する |

---

## 5. 前提条件・制約

### 5-1. 前提条件

| # | 前提条件 |
|---|---------|
| P-01 | 個人開発（1名）で開発・運用する |
| P-02 | 開発予算はほぼゼロ（無料枠のサービスを活用する） |
| P-03 | サーバーサイドの処理は持たず、クライアントサイドで完結する（MVP段階） |
| P-04 | ユーザー認証・ログイン機能はMVPに含めない |
| P-05 | 抽選ロジックはクライアントサイドのランダム生成で実装する |

### 5-2. 制約

| # | 制約 |
|---|------|
| C-01 | 現実の金銭を賭ける機能は実装しない（賭博罪回避） |
| C-02 | ゲーム内通貨の現金換金機能は実装しない |
| C-03 | 宝くじ公式のロゴ・デザインを使用しない（著作権回避） |
| C-04 | 宝くじの当選確率は現実の公式データに基づくこと |
| C-05 | ギャンブル依存症への配慮表示を必須とする |

---

## 6. リスク（企画書 B11: 最大リスク より）

| # | リスク | 深刻度 | 対策方針 |
|---|--------|--------|---------|
| R-01 | 法規制リスク（富くじ罪・刑法187条） | 高 | ゲーム内通貨のみ・換金不可を明示。「シミュレーション」と明記。リリース前に利用規約を整備 |
| R-02 | ギャンブル依存助長の批判 | 中 | 常時注意喚起表示、相談窓口リンク、プレイ時間通知 |
| R-03 | 継続率の低さ | 中 | 毎日0時の資金補給サイクル。次フェーズでリテンション施策（ログインボーナス・実績等）を検討 |
| R-04 | クライアントサイドのデータ消失 | 中 | MVP段階では許容。将来フェーズでサーバーサイド保存を検討 |
| R-05 | フリマ機能の法規制（将来） | 高 | 将来のフリマ機能実装時に弁護士相談必須 |

---

## 7. 用語定義

| 用語 | 定義 |
|------|------|
| ゲーム内通貨 | 本サービス内でのみ使用できる仮想通貨。現実の通貨との交換はできない |
| 10連ガチャ | 宝くじ10枚を一括で購入し抽選する操作。ソーシャルゲームの「10連ガチャ」をモチーフとする |
| 資金補給 | 毎日0時（JST）に所持金が一定額以下のユーザーに対してゲーム内通貨を付与する仕組み |
| 当選確率テーブル | 宝くじの各等級と当選確率を定義したデータ。現実の宝くじ公式データに基づく |
| MVP | Minimum Viable Product。最小限の機能で市場投入するバージョン |
| 等級 | 宝くじの当選ランク（1等、前後賞、2等、3等…等） |
| 回収率 | 累計当選額 ÷ 累計購入額 × 100（%） |

---

## 8. 次フェーズへの申し送り事項

以下は本フェーズ（要件定義）ではスコープ外とし、次フェーズ（機能詳細定義）で決定する。

| # | 項目 | 補足 |
|---|------|------|
| N-01 | 宝くじの種類選定 | 年末ジャンボ / サマージャンボ / 汎用ジャンボ等。確率テーブルの設計に直結 |
| N-02 | ゲーム内通貨の設計 | 通貨単位（円 or 独自）、初期付与額、補給額、所持上限 |
| N-03 | データ保存方式 | LocalStorage / BaaS（Supabase等）の選定 |
| N-04 | 技術スタック選定 | フレームワーク（React / Next.js等）、ホスティング先 |
| N-05 | 画面詳細定義 | ワイヤーフレーム、画面遷移図、UI仕様 |
| N-06 | 演出仕様 | アニメーション、サウンド、演出パターンの詳細 |
| N-07 | 権限定義 | MVP段階では不要（ログイン機能なし）。将来フェーズで定義 |
| N-08 | リテンション施策 | ログインボーナス、実績バッジ、連続プレイ報酬の詳細 |
| N-09 | SNSシェア仕様 | シェア画像デザイン、OGP設定、対応SNS |
| N-10 | 利用規約・プライバシーポリシー | リリース前に策定必須 |

---

作成日: 2026-02-10
