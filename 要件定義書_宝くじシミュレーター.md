# 要件定義書: 宝くじシミュレーター

| 項目 | 内容 |
|------|------|
| ドキュメントバージョン | v0.2 |
| 作成日 | 2026-02-10 |
| ステータス | ドラフト |
| 関連ドキュメント | 企画書_宝くじシミュレーター.md |

※ 現フェーズは要件定義のみ。機能詳細定義・画面詳細定義・権限定義は次フェーズで決定する。

---

## C3. 目的（KPI）

### 目的

宝くじの当選確率を「10連ガチャ」のUIで体感できるWebアプリを開発する。
ゲーム内通貨と毎日の資金補給サイクルにより、継続的にプレイできるエンターテインメント体験を提供する。

### 背景

- 宝くじ市場は2005年ピーク（1兆円超）から2023年の8,088億円へ約30%縮小
- 主力購入層は50〜70代。20〜30代は宝くじに触れる機会がほとんどない
- 既存シミュレーターは「統計ツール」止まりで、ゲーム性・継続動機がない
- 宝くじの期待値（還元率約47%）を体感で理解できる場が存在しない

### KPI

MVP段階では未設定。リリース後のユーザー行動を見て設定する。

---

## C4. 優先度

（本フェーズでは未設定）

---

## C5. リリース要望時期

（本フェーズでは未設定）

---

## C6. 想定ユーザ

| 区分 | 属性 |
|------|------|
| 一次ターゲット | 20〜35歳男性、スマホゲーム経験者、ガチャ文化に馴染みがある層 |
| ペルソナ | 「宝くじって当たるの？」と興味はあるが、わざわざ売り場に行く気はない。ソシャゲの10連ガチャのノリで気軽に試したい |
| 二次ターゲット | 宝くじ購入経験者（40〜60代）で「買い続けたらどうなるか」を検証したい層 |
| 除外 | ギャンブル依存症傾向の強い層（注意喚起UIで対応） |

### 利用トリガー

- 年末ジャンボ等の宝くじシーズンのSNS話題
- 「宝くじ 確率」「宝くじ シミュレーター」等の検索流入
- 暇つぶし・通勤中
- SNSでのシェア投稿経由（バイラル）

### 利用頻度・セッション

| 項目 | 想定 |
|------|------|
| 頻度 | 毎日1〜3回（0時の資金補給をトリガーに日課化を狙う） |
| 1セッション | 2〜5分（10連ガチャを数回回して結果確認） |

---

## C7. 基本要件

※ 各機能の詳細仕様（画面定義・項目定義・バリデーション等）は次フェーズで決定する。

### 7-1. 機能要件一覧

#### FR-01: ゲーム内通貨管理

| 項目 | 内容 |
|------|------|
| 概要 | ユーザーがゲーム内通貨を所持し、宝くじ購入・当選金受取で増減する |
| 主な要件 | - 初回アクセス時に初期資金を付与する |
|  | - 所持金の現在額を常時画面に表示する |
|  | - 所持金が購入額に満たない場合、購入を不可とする |
| 次フェーズで決定 | 通貨単位（円 or 独自通貨）、初期資金額、上限額 |

#### FR-02: 10連ガチャ（宝くじ10枚一括購入・抽選）

| 項目 | 内容 |
|------|------|
| 概要 | 10枚分の宝くじを一括購入し、抽選結果を表示する |
| 主な要件 | - 購入ボタン押下でゲーム内通貨を消費する |
|  | - 現実の宝くじと同一の当選確率で10枚分の抽選を行う |
|  | - 各等級の当選/落選を判定する |
|  | - 当選金をゲーム内通貨に加算する |
| 次フェーズで決定 | 宝くじ種類、確率テーブル、1枚あたりの価格、1連以外の購入単位の有無 |

#### FR-03: 当選演出

| 項目 | 内容 |
|------|------|
| 概要 | 抽選結果に応じた視覚演出を表示する |
| 主な要件 | - 当選等級に応じて演出を差別化する（高額当選ほど派手に） |
|  | - 10枚分の結果を順次または一括で表示する |
|  | - 演出スキップ機能を設ける |
| 次フェーズで決定 | 演出パターン詳細、アニメーション仕様、サウンド有無 |

#### FR-04: 毎日0時の資金補給

| 項目 | 内容 |
|------|------|
| 概要 | 毎日0時（JST）に所持金が一定額以下の場合、資金を補給する |
| 主な要件 | - 補給はクライアント側の日時判定で実行する |
|  | - 補給済みかどうかの状態を保持する（1日1回制限） |
|  | - 所持金が一定額以上ある場合は補給しない |
| 次フェーズで決定 | 補給額、補給条件の閾値、補給演出 |

#### FR-05: 累計収支・当選履歴

| 項目 | 内容 |
|------|------|
| 概要 | 過去のプレイ結果と累計の収支を閲覧できる |
| 主な要件 | - 累計購入枚数・累計購入額を表示する |
|  | - 累計当選額・回収率を表示する |
|  | - 等級別の当選回数を表示する |
|  | - 当選履歴を一覧で確認できる |
| 次フェーズで決定 | 履歴の保持件数上限、表示形式（グラフ/テーブル）、統計項目の詳細 |

#### FR-06: SNSシェア機能

| 項目 | 内容 |
|------|------|
| 概要 | 抽選結果をSNS（主にX/Twitter）にシェアできる |
| 主な要件 | - 抽選結果からシェア用の画像またはテキストを生成する |
|  | - X(Twitter)へのシェアボタンを設置する |
|  | - シェア内容にサービスURLを含める |
| 次フェーズで決定 | シェア画像のデザイン、対応SNSの範囲、OGP設定 |

#### FR-07: ギャンブル依存注意喚起

| 項目 | 内容 |
|------|------|
| 概要 | 本サービスがシミュレーションであることを明示し、依存症への注意喚起を行う |
| 主な要件 | - 「これはシミュレーションです」のメッセージを常時表示する |
|  | - ギャンブル依存症相談窓口へのリンクを設置する |
|  | - 初回アクセス時に注意事項を表示する |
| 次フェーズで決定 | 表示位置、文言、リンク先 |

#### 【追加】FR-08: データリセット機能

| 項目 | 内容 |
|------|------|
| 概要 | ユーザーが自身のプレイデータ（所持金・履歴）を初期化できる |
| 主な要件 | - リセットボタンを設置する |
|  | - リセット前に確認ダイアログを表示する |
|  | - リセット後は初回アクセスと同じ状態に戻る |
| 次フェーズで決定 | リセット対象の選択肢（全データ / 履歴のみ等） |

#### 【追加】FR-09: SEO/OGP対応

| 項目 | 内容 |
|------|------|
| 概要 | 検索エンジン・SNSからの流入を確保するための基本対応 |
| 主な要件 | - ページタイトル・meta descriptionを設定する |
|  | - OGP（Open Graph Protocol）タグを設定し、SNSシェア時にサムネイル・タイトルが表示されるようにする |
|  | - faviconを設定する |
| 次フェーズで決定 | OGP画像デザイン、構造化データの要否 |

#### 【追加】FR-10: 利用規約・免責表示

| 項目 | 内容 |
|------|------|
| 概要 | 法的リスク回避のため、利用規約と免責事項をサービス内に表示する |
| 主な要件 | - 利用規約ページを設置する |
|  | - 「シミュレーションであり、実際の宝くじとは無関係」の免責を明記する |
|  | - ゲーム内通貨は換金不可である旨を明記する |
| 次フェーズで決定 | 規約文面の詳細、表示導線 |

### 7-2. MVP範囲

| やる（MVP） | やらない（将来版） |
|-------------|-------------------|
| ゲーム内通貨による所持金管理 | リアルマネー課金 |
| 10連ガチャUI（宝くじ10枚購入） | ユーザー間フリマ/取引機能 |
| 宝くじ1種類の確率再現 | 複数宝くじ種類（ロト6/7、スクラッチ等） |
| 当選演出（アニメーション/エフェクト） | ガチャ景品（コレクションアイテム） |
| 毎日0時の資金補給 | ランキング/リーダーボード |
| 累計収支・当選履歴の表示 | ユーザーアカウント/ログイン機能 |
| SNSシェア機能 | プッシュ通知 |
| レスポンシブデザイン（スマホ優先） | ネイティブアプリ化 |
| ギャンブル依存注意喚起の表示 | 多言語対応 |
| データリセット機能 | アクセス解析ツール導入 |
| SEO/OGP対応 | 複数ユーザーのデータ同期 |
| 利用規約・免責表示 | |

### 7-3. 前提条件

| # | 前提条件 |
|---|---------|
| P-01 | 個人開発（1名）で開発・運用する |
| P-02 | 開発予算はほぼゼロ（無料枠のサービスを活用する） |
| P-03 | サーバーサイドの処理は持たず、クライアントサイドで完結する（MVP段階） |
| P-04 | ユーザー認証・ログイン機能はMVPに含めない |
| P-05 | 抽選ロジックはクライアントサイドのランダム生成で実装する |
| P-06 | 【追加】データ保存はクライアントサイド（LocalStorage等）を前提とする。データ消失はMVP段階では許容する |

### 7-4. 制約

| # | 制約 |
|---|------|
| C-01 | 現実の金銭を賭ける機能は実装しない（賭博罪回避） |
| C-02 | ゲーム内通貨の現金換金機能は実装しない |
| C-03 | 宝くじ公式のロゴ・デザインを使用しない（著作権回避） |
| C-04 | 宝くじの当選確率は現実の公式データに基づくこと |
| C-05 | ギャンブル依存症への配慮表示を必須とする |
| C-06 | 【追加】リリース前に利用規約・免責事項を策定すること |

### 7-5. データ要件

（次フェーズ（機能詳細定義）で決定する）

### 7-6. 権限要件

（次フェーズで決定。MVP段階はログイン機能なし、全ユーザー同一権限）

---

## C8. 非機能要件

### NFR-01: パフォーマンス

| 項目 | 要件 |
|------|------|
| 初回ロード | 3秒以内（3G回線を除く） |
| 抽選処理 | 10連ガチャの抽選〜結果表示が演出含め5秒以内 |
| 操作レスポンス | ボタン操作後のUI応答は200ms以内 |

### NFR-02: 可用性

| 項目 | 要件 |
|------|------|
| 稼働率目標 | 99%（月間ダウンタイム約7時間以内） |
| 静的ホスティング前提 | サーバーサイド処理なし（MVP段階）のため、ホスティングサービスのSLAに準拠 |

### NFR-03: 対応環境

| 項目 | 要件 |
|------|------|
| OS | iOS 15以上、Android 10以上、Windows 10以上、macOS 12以上 |
| ブラウザ | Chrome / Safari / Edge（各最新2バージョン） |
| 画面サイズ | 375px〜1920px（モバイルファースト設計） |

### NFR-04: セキュリティ

| 項目 | 要件 |
|------|------|
| 通信 | HTTPS必須 |
| 個人情報 | MVP段階ではユーザー個人情報を収集しない |
| データ改ざん | クライアントサイド保存のため完全な防止は不可。MVP段階では許容する |

### NFR-05: 保守性

| 項目 | 要件 |
|------|------|
| 宝くじ確率テーブル | 設定ファイルまたは定数として外部化し、種類追加・確率変更を容易にする |
| コード品質 | コメントは日本語、変数名・関数名は英語で記述する |

### 【追加】NFR-06: エラーハンドリング

| 項目 | 要件 |
|------|------|
| LocalStorage非対応 | プライベートブラウジング等でLocalStorageが使えない場合、警告メッセージを表示する。セッション中はメモリ上で動作を継続し、データは保存されない旨を通知する |
| データ破損 | 保存データの読み込みに失敗した場合、初期状態にリセットする |

### 【追加】NFR-07: アクセシビリティ

| 項目 | 要件 |
|------|------|
| 最低限の対応 | 画像にalt属性を設定する。ボタンにaria-labelを設定する。キーボード操作でガチャ実行が可能であること |

---

## C9. 対象デバイス

| 項目 | 内容 |
|------|------|
| 種別 | Webアプリ（SPA） |
| 優先デバイス | スマートフォン（80%想定） |
| 副次デバイス | PC（20%想定） |
| 非対応 | タブレット専用最適化（スマホレイアウトで対応）、ネイティブアプリ |

---

## C10. 開発体制

（本フェーズでは未設定）

---

## C11. 会議体

（本フェーズでは未設定）

---

## C12. コミュニケーション設計

（本フェーズでは未設定）

---

## C13. タスク管理ツール

（本フェーズでは未設定）

---

## C14. 懸念事項

| # | 懸念事項 | 深刻度 | 対策方針 |
|---|---------|--------|---------|
| R-01 | 法規制リスク（富くじ罪・刑法187条） | 高 | ゲーム内通貨のみ・換金不可を明示。「シミュレーション」と明記。リリース前に利用規約を整備 |
| R-02 | ギャンブル依存助長の批判 | 中 | 常時注意喚起表示、相談窓口リンク、プレイ時間通知 |
| R-03 | 継続率の低さ | 中 | 毎日0時の資金補給サイクル。次フェーズでリテンション施策を検討 |
| R-04 | クライアントサイドのデータ消失 | 中 | MVP段階では許容。将来フェーズでサーバーサイド保存を検討 |
| R-05 | フリマ機能の法規制（将来） | 高 | 将来のフリマ機能実装時に弁護士相談必須 |
| R-06 | 【追加】クライアント時刻の改ざん | 低 | 端末の時刻を変更して資金補給を繰り返す不正が可能。MVP段階では許容。将来フェーズでサーバー時刻検証を検討 |
| R-07 | 【追加】LocalStorageの容量制限 | 低 | 一般的に5MB程度。長期利用で当選履歴が肥大化した場合、古いデータの自動削除が必要になる可能性あり |

---

## 付録A. 用語定義

| 用語 | 定義 |
|------|------|
| ゲーム内通貨 | 本サービス内でのみ使用できる仮想通貨。現実の通貨との交換はできない |
| 10連ガチャ | 宝くじ10枚を一括で購入し抽選する操作。ソーシャルゲームの「10連ガチャ」をモチーフとする |
| 資金補給 | 毎日0時（JST）に所持金が一定額以下のユーザーに対してゲーム内通貨を付与する仕組み |
| 当選確率テーブル | 宝くじの各等級と当選確率を定義したデータ。現実の宝くじ公式データに基づく |
| MVP | Minimum Viable Product。最小限の機能で市場投入するバージョン |
| 等級 | 宝くじの当選ランク（1等、前後賞、2等、3等…等） |
| 回収率 | 累計当選額 ÷ 累計購入額 × 100（%） |
| SPA | Single Page Application。ページ遷移なしに動作するWebアプリの構成方式 |
| OGP | Open Graph Protocol。SNSでURLを共有した際にタイトル・画像を表示する仕組み |
| LocalStorage | ブラウザにデータを保存する仕組み。サーバー不要だが端末・ブラウザに依存する |

---

## 付録B. 次フェーズへの申し送り事項

以下は本フェーズ（要件定義）ではスコープ外とし、次フェーズ（機能詳細定義）で決定する。

| # | 項目 | 補足 |
|---|------|------|
| N-01 | 宝くじの種類選定 | 年末ジャンボ / サマージャンボ / 汎用ジャンボ等。確率テーブルの設計に直結 |
| N-02 | ゲーム内通貨の設計 | 通貨単位（円 or 独自）、初期付与額、補給額、所持上限 |
| N-03 | データ保存方式 | LocalStorage / BaaS（Supabase等）の選定 |
| N-04 | 技術スタック選定 | フレームワーク（React / Next.js等）、ホスティング先 |
| N-05 | 画面詳細定義 | ワイヤーフレーム、画面遷移図、UI仕様 |
| N-06 | 演出仕様 | アニメーション、サウンド、演出パターンの詳細 |
| N-07 | 権限定義 | MVP段階では不要（ログイン機能なし）。将来フェーズで定義 |
| N-08 | リテンション施策 | ログインボーナス、実績バッジ、連続プレイ報酬の詳細 |
| N-09 | SNSシェア仕様 | シェア画像デザイン、OGP画像、対応SNS |
| N-10 | 利用規約・プライバシーポリシー | リリース前に策定必須。文面は次フェーズで作成 |
| N-11 | データ要件（エンティティ設計） | 保存データの概念モデル・項目定義 |

---

作成日: 2026-02-10
